import { HRVSummaryResponseFromJson } from './hrv-summary';

describe('HRVSummary', () => {
  it('問題なく型変換出来ること', () => {
    const json = {
      hrv: [
        {
          dateTime: '2024-10-07',
          value: {
            dailyRmssd: 45.5,
            deepRmssd: 52.3,
          },
        },
        {
          dateTime: '2024-10-08',
          value: {
            dailyRmssd: 48.2,
            deepRmssd: 55.1,
          },
        },
      ],
    };

    const hrvSummaryResponse = HRVSummaryResponseFromJson(json);
    expect(hrvSummaryResponse.hRV.length).toEqual(2);
    expect(hrvSummaryResponse.hRV[0].localDate).toEqual('2024-10-07');
    expect(hrvSummaryResponse.hRV[0].value.dailyRmssd).toEqual(45.5);
    expect(hrvSummaryResponse.hRV[0].value.deepRmssd).toEqual(52.3);
    expect(hrvSummaryResponse.hRV[1].localDate).toEqual('2024-10-08');
    expect(hrvSummaryResponse.hRV[1].value.dailyRmssd).toEqual(48.2);
    expect(hrvSummaryResponse.hRV[1].value.deepRmssd).toEqual(55.1);
  });

  it('複数の日付のデータがある場合でも問題なく型変換出来ること', () => {
    const json = {
      hrv: [
        {
          dateTime: '2024-10-07',
          value: {
            dailyRmssd: 45.5,
            deepRmssd: 52.3,
          },
        },
        {
          dateTime: '2024-10-08',
          value: {
            dailyRmssd: 46.8,
            deepRmssd: 53.7,
          },
        },
        {
          dateTime: '2024-10-09',
          value: {
            dailyRmssd: 47.2,
            deepRmssd: 54.1,
          },
        },
      ],
    };

    const hrvSummaryResponse = HRVSummaryResponseFromJson(json);
    expect(hrvSummaryResponse.hRV.length).toEqual(3);
    expect(hrvSummaryResponse.hRV[0].localDate).toEqual('2024-10-07');
    expect(hrvSummaryResponse.hRV[0].value.dailyRmssd).toEqual(45.5);
    expect(hrvSummaryResponse.hRV[0].value.deepRmssd).toEqual(52.3);
    expect(hrvSummaryResponse.hRV[1].localDate).toEqual('2024-10-08');
    expect(hrvSummaryResponse.hRV[1].value.dailyRmssd).toEqual(46.8);
    expect(hrvSummaryResponse.hRV[1].value.deepRmssd).toEqual(53.7);
    expect(hrvSummaryResponse.hRV[2].localDate).toEqual('2024-10-09');
    expect(hrvSummaryResponse.hRV[2].value.dailyRmssd).toEqual(47.2);
    expect(hrvSummaryResponse.hRV[2].value.deepRmssd).toEqual(54.1);
  });
});
